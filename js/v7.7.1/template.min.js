var cachedCity=null;var cachedLat=null;var cachedLong=null;var highlightedElementIndex=-1;var hideAutosuggestionDivFlag=true;var LOADING_MESSAGE="Loading Results...";var ZERO_RESULT_MESSAGE="No results found. View all blog posts.";var keystrokeTimeout=null;var KEY_STROKE_INTERVAL=300;if(typeof(Storage)!=="undefined"){if(localStorage.getItem("userCity")!=null&&localStorage.getItem("popularLocalities")!=null&&localStorage.getItem("userLat")!=null&&localStorage.getItem("userLng")!=null){cachedCity=localStorage.getItem("userCity");cachedLat=localStorage.getItem("userLat");cachedLong=localStorage.getItem("userLng")}}function showMessage(a){if(a==LOADING_MESSAGE){$loadingResultsHtml='<li class="blog-auto-suggest-loading-li">Loading Results...</li>';document.getElementById("blog-auto-suggest-ul").innerHTML=$loadingResultsHtml}else{if(a==ZERO_RESULT_MESSAGE){$loadingResultsHtml='<li class="blog-auto-suggest-loading-li">No results found.</li>';document.getElementById("blog-auto-suggest-ul").innerHTML=$loadingResultsHtml}}}function focusOutActions(){var b=document.getElementById("blog-auto-suggest-ul");var a=b.getElementsByTagName("li");if(highlightedElementIndex!==-1&&b!==null&&a!==null){d=a[highlightedElementIndex];d.className=d.className.replace(new RegExp("(?:^|\\s)highlighted-element(?:\\s|$)")," ")}highlightedElementIndex=-1;if(b!=null){b.style.display="none"}}function updateAutoSuggestionDiv(i,b){var e=JSON.parse(i);if(e.length>0){var f="";for(var c=0;c<e.length;c++){var h=e[c]["post_title"];var g=new RegExp(b,"ig");var a='<span class="mark">$&</span>';h=h.replace(g,a);f=f+'<li class="blog-auto-suggest-li" onclick="openSelectedBlogPost(\''+e[c]["post_url"]+'\')" data-url="'+e[c]["post_url"]+'">'+h+"</li>"}document.getElementById("blog-auto-suggest-ul").innerHTML=f}else{showMessage(ZERO_RESULT_MESSAGE)}}function getAutoSuggestions(a){showMessage(LOADING_MESSAGE);var b=new XMLHttpRequest();b.open("GET",baseUrl+"/auto-suggestions/?term="+a,true);b.onload=function(){var c=this.responseText;if(b.status===200){try{updateAutoSuggestionDiv(c,a)}catch(f){showMessage(ZERO_RESULT_MESSAGE);return}}else{showMessage(ZERO_RESULT_MESSAGE)}};b.send()}function openSelectedBlogPost(e){var a=document.getElementById("blog-search").value.trim();var b=e.substring(0,e.lastIndexOf("/"));var c=b.substring(b.lastIndexOf("/")+1);ga("send",{hitType:"event",eventCategory:pageName,eventAction:"Selected search bar auto-suggestion",eventLabel:"Term: "+a+"/Post Slug: "+c});window.open(baseUrl+e,"_self")}window.addEventListener("load",function(){var f=document.getElementById("blog-search");var b=document.getElementById("search-glass");var a=document.getElementById("mobile-navigation-button");var e=document.getElementById("nav-close");var g=document.getElementById("blog-auto-suggest-ul");var c=g.getElementsByTagName("li");if(cachedCity!=null&&cachedLat!=null&&cachedLong!=null){cachedCitySlug=cachedCity.trim().toLowerCase().replace(" ","-");document.getElementById("mobile-nav-doc-anchor").setAttribute("href",websiteBaseUrl+"/doctor-search/"+cachedCitySlug+"/doc_/1?lat="+cachedLat+"&lng="+cachedLong);document.getElementById("mobile-nav-doc-anchor").setAttribute("onclick","ga('send', {hitType: 'event',eventCategory:'"+pageName+"', eventAction: 'Find doctors link in nav bar',eventLabel: 'Find doctors in "+cachedCity+"'});");document.getElementById("header-doc-anchor").setAttribute("href",websiteBaseUrl+"/doctor-search/"+cachedCitySlug+"/doc_/1?lat="+cachedLat+"&lng="+cachedLong);document.getElementById("header-doc-anchor").setAttribute("onclick","ga('send', {hitType: 'event',eventCategory:'"+pageName+"', eventAction: 'Find doctors link in header',eventLabel: 'Find doctors in "+cachedCity+"'});")}g.addEventListener("mouseover",function(){hideAutosuggestionDivFlag=false});g.addEventListener("mouseout",function(){hideAutosuggestionDivFlag=true});b.addEventListener("click",function(i){var h=f.value.trim();if(h.length>0&&isNaN(h)){ga("send",{hitType:"event",eventCategory:pageName,eventAction:"Search Bar Button Click",eventLabel:h});window.open(baseUrl+"/?s="+h,"_self")}});f.addEventListener("focus",function(){if(f.value.length>=2){g.style.display="block"}});f.addEventListener("blur",function(){if(hideAutosuggestionDivFlag){focusOutActions()}});f.addEventListener("keyup",function(k){var j=k.keyCode;var i=f.value.trim();if(j==13){if(highlightedElementIndex==-1&&i.length>0&&isNaN(i)){ga("send",{hitType:"event",eventCategory:pageName,eventAction:"Search Bar Enter",eventLabel:i});window.open(baseUrl+"/?s="+i,"_self")}else{if(highlightedElementIndex!=-1){var l=c[highlightedElementIndex].getAttribute("data-url");if(l!==null){openSelectedBlogPost(l)}}}}else{if(j==27){focusOutActions();return}else{if(j==40||j==38){var h=1;if(j==38){h=-1}if(highlightedElementIndex!==-1){d=c[highlightedElementIndex];d.className=d.className.replace(new RegExp("(?:^|\\s)highlighted-element(?:\\s|$)")," ")}if(j==40&&highlightedElementIndex==(c.length-1)){highlightedElementIndex=0}else{if(j==38&&(highlightedElementIndex==0||highlightedElementIndex==-1)){highlightedElementIndex=c.length-1}else{highlightedElementIndex+=h}}d=c[highlightedElementIndex];d.className+=" highlighted-element"}else{if(i.length>=2&&isNaN(i)){showMessage(LOADING_MESSAGE);if(keystrokeTimeout!=null){clearTimeout(keystrokeTimeout)}keystrokeTimeout=setTimeout(function(){keystrokeTimeout=null;getAutoSuggestions(i)},KEY_STROKE_INTERVAL)}}}}if(i.length>=2&&isNaN(i)){g.style.display="block"}else{focusOutActions()}});a.addEventListener("click",function(h){e.style.display="block";document.getElementById("mobile-nav-div").style.width="260px";document.getElementById("mobile-nav-div").style.borderRight="#D9D9D9 solid thin";document.getElementById("mobile-nav-div").style.overflow="auto";document.body.style.overflow="hidden";document.getElementById("page-wrap").style.backgroundColor="#ffffff";document.getElementById("page-wrap").style.opacity="0.3";document.getElementById("page-wrap").style.pointerEvents="none";document.getElementById("footer").style.backgroundColor="#ffffff";document.getElementById("footer").style.opacity="0.3";document.getElementById("footer").style.pointerEvents="none";ga("send",{hitType:"event",eventCategory:pageName,eventAction:"Open Nav Bar",eventLabel:"Open Nav Bar"})});e.addEventListener("click",function(h){e.style.display="none";document.body.style.overflow="auto";document.getElementById("mobile-nav-div").style.width="0";document.getElementById("mobile-nav-div").style.borderRight="0px";document.getElementById("page-wrap").style.backgroundColor="#ffffff";document.getElementById("page-wrap").style.opacity="1.0";document.getElementById("page-wrap").style.pointerEvents="auto";document.getElementById("footer").style.backgroundColor="#ffffff";document.getElementById("footer").style.opacity="1.0";document.getElementById("footer").style.pointerEvents="auto";ga("send",{hitType:"event",eventCategory:pageName,eventAction:"Close Nav Bar",eventLabel:"Close Nav Bar"})});(function(k,l,q,p,n,j,h){k.GoogleAnalyticsObject=n;k[n]=k[n]||function(){(k[n].q=k[n].q||[]).push(arguments)},k[n].l=1*new Date();j=l.createElement(q),h=l.getElementsByTagName(q)[0];j.async=1;j.src=p;h.parentNode.insertBefore(j,h)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-58586733-6","auto");ga("send","pageview")});window.onload=function(){document.getElementById("blog-search").value=""};